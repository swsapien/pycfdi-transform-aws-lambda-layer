# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python
trigger:
- master
pool:
  vmImage: 'Ubuntu-16.04' 

steps:
- script: |
    pip --version
    python --version
    python38 --version    
    docker run -v "$PWD":/var/task "lambci/lambda:build-python3.8" /bin/sh -c "pip install -r requirements.txt -t python/lib/python3.8/site-packages/; exit"
  displayName: 'install requirements'
- task: CopyFiles@2
  inputs:
    contents: 'python/**'
    targetFolder: $(Build.ArtifactStagingDirectory)/python
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'dist'
    publishLocation: 'Container'